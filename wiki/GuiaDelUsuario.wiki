#summary Guía del Usuario
#labels Featured

`***`nota: los componentes están en desarrollo y su interfaz puede llegar a cambiar antes de alcanzar la versión 1.0`***`

== Pre-requisitos ==
 
Para trabajar con los componentes de factura electrónica debes tener instalados los siguientes sistemas:

  * [http://www.java.com/en/download/manual.jsp Java 6]
  * [http://maven.apache.org/download.html Maven]

=== Compilar los componentes  ===

Para compilar los componentes, utiliza el comando:

{{{mvn compile}}}

este comando preparará todas las dependencias y generará el código necesario para trabajar con el XSD de la versión 3.0  del CFD

== Librería de componentes ==

La librería presenta una interfaz muy simple centrada en el Comprobante Fiscal Digital (CFD):

{{{
    CFDv3 cfd = new CFDv3(new FileInputStream(file)); // Crea un CFD a partir de un InputStream, en este caso un archivo
    cfd.validate(); // Valida el XML, que todos los elementos estén presentes
    cfd.getOriginalString(); // Obtiene la cadena original
    cfd.getDigest() // Obtiene el digest
    Key key = KeyLoader.loadPKCS8PrivateKey(new FileInputStream(keyfile),  password);
    cfd.getSignature(key); // Obtiene la firma utilizando la llave privada
    cfd.verify(); // Verifica un certificado ya firmado
}}}


== Herramientas ==

Asegurate de incluir las clases compiladas en el CLASSPATH, esto lo puedes hacer ejecutando el siguiente comando:

  * en `*`nix: `export CLASSPATH=target/classes/`
  * en windows: `set CLASSPATH=target\classes\`

=== Validar el XML de un CFD ===

Para validar el XML de ejemplo contra el esquema, utiliza el siguiente comando:

{{{ java mx.bigdata.cfdi.tools.CFDv3Validator resources/xml/cfdv3.xml resources/xsd/cfdv3.xsd }}}

Reemplaza el primer argumento para validar otros XMLs

=== Verificar el sello de un CFD ===

Para verificar el sello del XML de ejemplo, utiliza el siguiente comando:

{{{ java mx.bigdata.cfdi.tools.CFDv3Verifier resources/xml/cfdv3.xml resources/xslt/cadenaoriginal_3_0.xslt }}}

Reemplaza el primer argumento para verificar otros CFDs